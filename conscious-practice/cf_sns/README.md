# 의식적인 연습

제공되는 강의에 테스트를 추가하고 정리한다.

## 5. 쿼리와 파라미터

다음은 REST API 기본 설계 예시이다. GET 요청을 제외하고는 대부분 Body를 사용한다.

```text
[GET] /posts 
> 다수의 글을 가져온다. (전체조회)
[GET] /posts/10 
> 10이라는 id를 가진 글을 가져온다. (단건조회)
[POST] /posts 
> 새로운 글을 작성한다. (글 작성)
[PATCH] /posts/10 
> 10이라는 id를 가진 글을 부분 변경한다. (업데이트/수정)
[PUT] /posts/10
> 10이라는 id를 가진 글을 전체 변경하거나 생성한다. (업데이트/수정)
[DELETE] /posts/10
> 10이라는 id를 가진 글을 삭제한다. (삭제)
```

- PATCH VS PUT
    - PATCH는 변경하고 싶은 부분만 전송해도 되지만, PUT은 필요한 데이터 전체를 전송해야 한다.

### Exception

[상위 4개](https://docs.nestjs.com/exception-filters)의 항목을 주로 사용한다.

## 6. 서비스

- 아키텍처(Architecture): 서비스의 동작원리를 나타낸다.
    - 컨트롤러는 HTTP 요청을 담당한다.
        - 가장 앞선에서 HTTP 요청이 어떤 함수로 실행되어야 할 지(라우트)를 결정한다.
        - 더 복잡한 작업은 provider 에게 요청한다.
    - 서비스는 비즈니스 로직을 담당한다.
        - 논리를 담당한다.
        - 컨트롤러에서 서비스 파일을 요청한다.
- 프로바이더(Providers): 주입될 수 있는 객체를 의미한다.

## 7. Module, Provider and Inversion of Control (제어의 역전)

> 인스턴스는 클래스의 정의를 통해 만들어진 객체를 의미한다.

### 의존성 주입(Dependency Injection)

의존하고 있는 클래스를 인스턴스화하여 직접 주입해 준다. (일반적인 방법)

### Inversion of Control (제어의 역전)

의존하는 인스턴스를 사용자가 직접 주입하던 과정을 프레임워크가 대신 담당 해준다. 프레임워크가 작업을 대신해 주기 때문에
사용자는 인스턴스의 생성과 폐기를 전혀 신경 쓰지 않고 기능에 집중할 수 있다.

**프로바이더**는 NestJS에서 일반적으로 사용하는 이름으로 생성자(constructor)에 정의함으로 써 주입을 받을 수 있다.

- 프레임워크는 서비스를 모듈(module)에 등록해 두어야만 IOC 컨테이너가 인지할 수 있다.

```typescript
@Module({
  controllers: [PostsController],
  providers: [PostsService],
})
export class PostsModule {
}
```

서비스, 리포지토리는 어떤 역할을 하는지 지칭하는 명칭이다.

- 프로바이더로 사용하고 싶은 클래스는 2가지 과정을 거쳐야 한다.
    1. 모듈에 등록한다.
    2. `@Injectable()` 데코레이터 사용: 클래스가 주입할 수 있는 클래스라고 지정해야 한다.

- imports는 다른 모듈을 불러올 때 사용한다.
    - 사용자가 직접 파일을 정의한다면 `app.module.ts`에도 직접 정의해야 한다. 하지만 `CLI`를 사용해서 모듈을 정의했다면 자동으로 등록된다.
